!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("react"),require("prop-types")):"function"==typeof define&&define.amd?define(["react","prop-types"],e):t.AutosizeInput=e(t.React,t.PropTypes)}(this,function(t,e){"use strict";var n="default"in t?t.default:t;e=e&&e.hasOwnProperty("default")?e.default:e;!function(){function t(t){this.value=t}function e(e){var n,i;function r(n,i){try{var s=e[n](i),u=s.value;u instanceof t?Promise.resolve(u.value).then(function(t){r("next",t)},function(t){r("throw",t)}):o(s.done?"return":"normal",s.value)}catch(t){o("throw",t)}}function o(t,e){switch(t){case"return":n.resolve({value:e,done:!0});break;case"throw":n.reject(e);break;default:n.resolve({value:e,done:!1})}(n=n.next)?r(n.key,n.arg):i=null}this._invoke=function(t,e){return new Promise(function(o,s){var u={key:t,arg:e,resolve:o,reject:s,next:null};i?i=i.next=u:(n=i=u,r(t,e))})},"function"!=typeof e.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(t){return this._invoke("next",t)},e.prototype.throw=function(t){return this._invoke("throw",t)},e.prototype.return=function(t){return this._invoke("return",t)}}();var i=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},u={position:"absolute",top:0,left:0,wordWrap:"break-word",visibility:"hidden"},a=["extraWidth","injectStyles","inputClassName","inputRef","inputStyle","minWidth","onAutosize","placeholderIsMinWidth"],p=function(t,e){e.style.fontSize=t.fontSize,e.style.fontFamily=t.fontFamily,e.style.fontWeight=t.fontWeight,e.style.fontStyle=t.fontStyle,e.style.letterSpacing=t.letterSpacing,e.style.textTransform=t.textTransform},l=!("undefined"==typeof window||!window.navigator)&&/MSIE |Trident\/|Edge\//.test(window.navigator.userAgent),c=function(){return l?"_"+Math.random().toString(36).substr(2,12):void 0},h=10,f=function(e){function f(t){i(this,f);var e=s(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,t));if(e.updateTextAreaRows=function(){var t=e.input,n=t.offsetHeight;n<t.scrollHeight&&e.setState(function(t){return{rows:t.rows+1}}),e.sizer.scrollHeight+h<n&&e.state.rows>1&&e.setState(function(t){return{rows:t.rows-1}})},e.pxToNumber=function(t){return/\dpx/.test(t)?+t.replace("px",""):0},e.getParentWidth=function(){var t=e.props.parentSelector;if(t){var n=e.container.closest(t);if(n){e.setState({parentWidth:n.clientWidth});for(var i=0,r=e.input;;){var o=window.getComputedStyle(r);if(i+=e.pxToNumber(o.paddingLeft)+e.pxToNumber(o.paddingRight)+e.pxToNumber(o.marginLeft)+e.pxToNumber(o.marginRight),r.parentElement===n||null===r.parentElement)break;r=r.parentElement}console.log(i),e.setState({totalPadding:i})}}},e.inputRef=function(t){e.input=t,"function"==typeof e.props.inputRef&&e.props.inputRef(t)},e.placeHolderSizerRef=function(t){e.placeHolderSizer=t},e.sizerRef=function(t){e.sizer=t},e.containerRef=function(t){e.container=t},!e.props.parentSelector)throw new Error("field `parentSelector` is required");return e.state={inputWidth:t.minWidth,inputId:t.id||c(),prevId:t.id,rows:1,parentWidth:"auto",totalPadding:0},e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(f,t.Component),r(f,null,[{key:"getDerivedStateFromProps",value:function(t,e){var n=t.id;return n!==e.prevId?{inputId:n||c(),prevId:n}:null}}]),r(f,[{key:"componentDidMount",value:function(){this.mounted=!0,this.copyInputStyles(),this.updateInputWidth(),this.getParentWidth()}},{key:"componentDidUpdate",value:function(t,e){e.inputWidth!==this.state.inputWidth&&"function"==typeof this.props.onAutosize&&this.props.onAutosize(this.state.inputWidth),this.updateInputWidth(),this.updateTextAreaRows()}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"copyInputStyles",value:function(){if(this.mounted&&window.getComputedStyle){var t=this.input&&window.getComputedStyle(this.input);t&&(p(t,this.sizer),this.placeHolderSizer&&p(t,this.placeHolderSizer))}}},{key:"updateInputWidth",value:function(){if(this.mounted&&this.sizer&&void 0!==this.sizer.scrollWidth){var t=void 0;t=this.props.placeholder&&(!this.props.value||this.props.value&&this.props.placeholderIsMinWidth)?Math.max(this.sizer.scrollWidth,this.placeHolderSizer.scrollWidth)+2:this.sizer.scrollWidth+2,(t+="number"===this.props.type&&void 0===this.props.extraWidth?16:parseInt(this.props.extraWidth)||0)<this.props.minWidth&&(t=this.props.minWidth),t!==this.state.inputWidth&&this.setState({inputWidth:t})}}},{key:"getInput",value:function(){return this.input}},{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"select",value:function(){this.input.select()}},{key:"renderStyles",value:function(){var t=this.props.injectStyles;return l&&t?n.createElement("style",{dangerouslySetInnerHTML:{__html:"input#"+this.state.inputId+"::-ms-clear {display: none;}"}}):null}},{key:"render",value:function(){var t=[this.props.defaultValue,this.props.value,""].reduce(function(t,e){return null!==t&&void 0!==t?t:e}),e=this.props.siblingWidth,i=void 0===e?0:e,r="auto"===this.state.parentWidth?"auto":this.state.parentWidth-this.state.totalPadding-2-i,s=o({},this.props.style,{maxWidth:r});s.display||(s.display="inline-block");var p=o({boxSizing:"content-box",width:this.state.inputWidth+"px",maxWidth:r},this.props.inputStyle),l=this.props,c=(l.parentQuery,function(t,e){var n={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}(l,["parentQuery"]));return function(t){a.forEach(function(e){return delete t[e]})}(c),c.className=this.props.inputClassName,c.id=this.state.inputId,c.style=p,n.createElement("div",{ref:this.containerRef,className:this.props.className,style:s},this.renderStyles(),n.createElement("textarea",o({},c,{style:o({},c.style,{resize:"none"}),rows:this.state.rows,ref:this.inputRef,onKeyPress:function(t){"Enter"===t.key&&t.preventDefault()}})),n.createElement("div",{ref:this.sizerRef,style:o({},u,{maxWidth:r})},t),this.props.placeholder?n.createElement("div",{ref:this.placeHolderSizerRef,style:u},this.props.placeholder):null)}}]),f}();return f.defaultProps={minWidth:1,injectStyles:!0},f});
